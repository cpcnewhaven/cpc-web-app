{% extends "base.html" %}

{% block title %}Gallery - CPC New Haven{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="page-hero">
    <div class="container">
        <h1>Gallery</h1>
        <p>Photos from our church community and events</p>
    </div>
</section>

<!-- Gallery Section -->
<section class="gallery-section">
    <div class="container">
        <div id="gallery-container" class="gallery-grid">
            <!-- Gallery images will be populated by JavaScript -->
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Load gallery images
    fetch('/api/gallery')
        .then(response => response.json())
        .then(data => {
            const container = document.getElementById('gallery-container');
            
            if (data.images && data.images.length > 0) {
                data.images.forEach(image => {
                    const imageElement = document.createElement('div');
                    imageElement.classList.add('gallery-item');
                    imageElement.innerHTML = `
                        <img src="${image.url}" alt="${image.name || 'Gallery Image'}" loading="lazy">
                        <div class="gallery-overlay">
                            <h3>${image.name || 'Untitled'}</h3>
                            ${image.tags ? `<p class="gallery-tags">${image.tags.join(', ')}</p>` : ''}
                        </div>
                    `;
                    container.appendChild(imageElement);
                });
            } else {
                container.innerHTML = '<p>No images in the gallery yet.</p>';
            }
        })
        .catch(error => {
            console.error('Error loading gallery:', error);
            document.getElementById('gallery-container').innerHTML = '<p>Error loading gallery images.</p>';
        });
});
</script>

<style>
.gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1rem;
    margin-top: 2rem;
}

.gallery-item {
    position: relative;
    overflow: hidden;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s;
}

.gallery-item:hover {
    transform: translateY(-5px);
}

.gallery-item img {
    width: 100%;
    height: 250px;
    object-fit: cover;
    display: block;
}

.gallery-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
    color: white;
    padding: 1rem;
    transform: translateY(100%);
    transition: transform 0.3s;
}

.gallery-item:hover .gallery-overlay {
    transform: translateY(0);
}

.gallery-overlay h3 {
    margin-bottom: 0.5rem;
}

.gallery-tags {
    font-size: 0.9rem;
    opacity: 0.8;
}
</style>
{% endblock %}
